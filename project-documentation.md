# توثيق مشروع متجر إلكتروني

## نظرة عامة على المشروع

هذا المشروع عبارة عن متجر إلكتروني متكامل يتكون من جزأين رئيسيين:

1. **واجهة المستخدم (Frontend)**: تطبيق Angular يوفر واجهة مستخدم تفاعلية للعملاء والمسؤولين.
2. **واجهة الخلفية (Backend)**: خدمة API مبنية باستخدام ASP.NET Core تتعامل مع قاعدة البيانات وتوفر نقاط نهاية للتفاعل مع واجهة المستخدم.

## هيكل المشروع

### 1. واجهة المستخدم (Angular)

#### 1.1 المكونات الرئيسية

- **متجر العملاء**: واجهة تسوق للمستخدمين النهائيين
- **لوحة تحكم المسؤول**: واجهة إدارية للمسؤولين لإدارة المتجر

#### 1.2 هيكل المجلدات

```
app-store/
├── src/
│   ├── app/
│   │   ├── admin/                  # مكونات لوحة تحكم المسؤول
│   │   │   ├── dashboard/          # لوحة القيادة الرئيسية
│   │   │   ├── products/           # إدارة المنتجات
│   │   │   ├── categories/         # إدارة التصنيفات
│   │   │   ├── orders/             # إدارة الطلبات
│   │   │   ├── customers/          # إدارة العملاء
│   │   │   ├── users/              # إدارة المستخدمين
│   │   │   ├── settings/           # إعدادات المتجر
│   │   │   └── admin.routes.ts     # مسارات لوحة التحكم
│   │   │
│   │   ├── pages/                  # صفحات المتجر الرئيسية
│   │   │   ├── home/               # الصفحة الرئيسية
│   │   │   ├── products/           # صفحة المنتجات
│   │   │   ├── cart/               # سلة التسوق
│   │   │   ├── checkout/           # إتمام الشراء
│   │   │   └── auth/               # صفحات المصادقة
│   │   │
│   │   ├── shared/                 # المكونات والخدمات المشتركة
│   │   │   ├── components/         # مكونات مشتركة
│   │   │   ├── services/           # خدمات مشتركة
│   │   │   ├── interfaces/         # واجهات TypeScript
│   │   │   ├── models/             # نماذج البيانات
│   │   │   └── interceptors/       # معترضات HTTP
│   │   │
│   │   ├── layouts/                # تخطيطات الصفحات
│   │   │   ├── store-layout/       # تخطيط المتجر
│   │   │   └── admin-layout/       # تخطيط لوحة التحكم
│   │   │
│   │   ├── app.component.ts        # المكون الرئيسي
│   │   ├── app.routes.ts           # مسارات التطبيق
│   │   └── app.config.ts           # إعدادات التطبيق
│   │
│   ├── assets/                     # الموارد الثابتة
│   │   ├── css/                    # ملفات CSS
│   │   ├── js/                     # ملفات JavaScript
│   │   ├── img/                    # الصور
│   │   └── admin/                  # موارد لوحة التحكم (NiceAdmin)
│   │
│   ├── environments/               # إعدادات البيئات
│   │   ├── environment.ts          # بيئة التطوير
│   │   └── environment.prod.ts     # بيئة الإنتاج
│   │
│   └── main.ts                     # نقطة الدخول الرئيسية
```

### 2. واجهة الخلفية (ASP.NET Core)

#### 2.1 المكونات الرئيسية

- **وحدات التحكم (Controllers)**: تتعامل مع طلبات HTTP وتوفر نقاط نهاية API
- **النماذج (Models)**: تمثل هياكل البيانات
- **سياق قاعدة البيانات (DbContext)**: يدير الاتصال بقاعدة البيانات
- **الخدمات (Services)**: توفر وظائف مشتركة مثل إنشاء التوكن

#### 2.2 هيكل المجلدات

```
app-store-api/
├── Controllers/                # وحدات التحكم
│   ├── ProductsController.cs   # إدارة المنتجات
│   ├── CategoriesController.cs # إدارة التصنيفات
│   ├── OrdersController.cs     # إدارة الطلبات
│   └── UsersController.cs      # إدارة المستخدمين والمصادقة
│
├── Models/                     # نماذج البيانات
│   ├── User.cs                 # نموذج المستخدم
│   ├── Product.cs              # نموذج المنتج
│   ├── Category.cs             # نموذج التصنيف
│   ├── Order.cs                # نموذج الطلب
│   └── OrderItem.cs            # نموذج عنصر الطلب
│
├── DTOs/                       # كائنات نقل البيانات
│   ├── UserDto.cs              # DTO للمستخدم
│   ├── ProductDto.cs           # DTO للمنتج
│   ├── CategoryDto.cs          # DTO للتصنيف
│   └── OrderDto.cs             # DTO للطلب
│
├── Data/                       # طبقة الوصول للبيانات
│   └── ApplicationDbContext.cs # سياق قاعدة البيانات
│
├── Services/                   # الخدمات
│   └── TokenService.cs         # خدمة إنشاء وإدارة التوكن
│
├── Helpers/                    # مساعدات
│   └── MappingProfile.cs       # ملف تعيين AutoMapper
│
└── Program.cs                  # نقطة الدخول الرئيسية
```

## قاعدة البيانات

### 1. مخطط قاعدة البيانات

قاعدة البيانات تتكون من الجداول التالية:

- **Users**: يخزن معلومات المستخدمين
- **Categories**: يخزن تصنيفات المنتجات
- **Products**: يخزن معلومات المنتجات
- **Orders**: يخزن معلومات الطلبات
- **OrderItems**: يخزن عناصر الطلبات

### 2. العلاقات

- **المنتج والتصنيف**: علاقة متعدد إلى واحد (Many-to-One)
- **الطلب والمستخدم**: علاقة متعدد إلى واحد (Many-to-One)
- **عنصر الطلب والطلب**: علاقة متعدد إلى واحد (Many-to-One)
- **عنصر الطلب والمنتج**: علاقة متعدد إلى واحد (Many-to-One)

## واجهة برمجة التطبيقات (API)

### 1. نقاط النهاية الرئيسية

#### 1.1 المستخدمين

- `POST /api/Users/Register`: تسجيل مستخدم جديد
- `POST /api/Users/Login`: تسجيل الدخول
- `GET /api/Users`: الحصول على قائمة المستخدمين (للمسؤولين)
- `GET /api/Users/{id}`: الحصول على معلومات مستخدم محدد
- `PUT /api/Users/{id}`: تحديث معلومات مستخدم
- `PUT /api/Users/{id}/ChangePassword`: تغيير كلمة المرور
- `DELETE /api/Users/{id}`: حذف مستخدم (للمسؤولين)

#### 1.2 المنتجات

- `GET /api/Products`: الحصول على قائمة المنتجات
- `GET /api/Products/{id}`: الحصول على منتج محدد
- `GET /api/Products/Category/{categoryId}`: الحصول على المنتجات حسب التصنيف
- `GET /api/Products/Featured`: الحصول على المنتجات المميزة
- `POST /api/Products`: إضافة منتج جديد (للمسؤولين والمحررين)
- `PUT /api/Products/{id}`: تحديث منتج (للمسؤولين والمحررين)
- `DELETE /api/Products/{id}`: حذف منتج (للمسؤولين)

#### 1.3 التصنيفات

- `GET /api/Categories`: الحصول على قائمة التصنيفات
- `GET /api/Categories/{id}`: الحصول على تصنيف محدد
- `POST /api/Categories`: إضافة تصنيف جديد (للمسؤولين)
- `PUT /api/Categories/{id}`: تحديث تصنيف (للمسؤولين)
- `DELETE /api/Categories/{id}`: حذف تصنيف (للمسؤولين)

#### 1.4 الطلبات

- `GET /api/Orders`: الحصول على قائمة الطلبات (للمسؤولين)
- `GET /api/Orders/{id}`: الحصول على طلب محدد
- `GET /api/Orders/User/{userId}`: الحصول على طلبات مستخدم محدد
- `GET /api/Orders/Status/{status}`: الحصول على الطلبات حسب الحالة
- `POST /api/Orders`: إنشاء طلب جديد
- `PUT /api/Orders/{id}`: تحديث حالة الطلب (للمسؤولين)
- `DELETE /api/Orders/{id}`: حذف طلب (للمسؤولين)

### 2. المصادقة والتفويض

- يستخدم المشروع **JWT (JSON Web Tokens)** للمصادقة
- يتم التحقق من الأدوار باستخدام سمة `[Authorize(Roles = "...")]`
- الأدوار المتاحة: `Admin`, `Editor`, `Customer`

## واجهة المستخدم

### 1. متجر العملاء

#### 1.1 الصفحات الرئيسية

- **الصفحة الرئيسية**: عرض المنتجات المميزة والعروض
- **صفحة المنتجات**: عرض جميع المنتجات مع إمكانية التصفية والبحث
- **صفحة المنتج**: عرض تفاصيل منتج محدد
- **سلة التسوق**: عرض المنتجات المضافة إلى السلة
- **صفحة الدفع**: إتمام عملية الشراء
- **صفحة الحساب**: إدارة معلومات المستخدم وعرض الطلبات السابقة

#### 1.2 المكونات المشتركة

- **الرأس (Header)**: يحتوي على شعار المتجر وقائمة التنقل وأيقونات السلة والحساب
- **التذييل (Footer)**: يحتوي على معلومات الاتصال وروابط مفيدة
- **قائمة التنقل (Navbar)**: تعرض روابط الصفحات الرئيسية والتصنيفات

### 2. لوحة تحكم المسؤول

#### 2.1 الصفحات الرئيسية

- **لوحة القيادة**: عرض إحصائيات المبيعات والطلبات والمستخدمين
- **إدارة المنتجات**: إضافة وتعديل وحذف المنتجات
- **إدارة التصنيفات**: إضافة وتعديل وحذف التصنيفات
- **إدارة الطلبات**: عرض وتحديث حالة الطلبات
- **إدارة العملاء**: عرض وإدارة حسابات العملاء
- **إدارة المستخدمين**: إضافة وتعديل وحذف المستخدمين الإداريين
- **الإعدادات**: تكوين إعدادات المتجر

#### 2.2 المكونات المشتركة

- **الشريط الجانبي (Sidebar)**: يحتوي على روابط لجميع أقسام لوحة التحكم
- **الرأس (Header)**: يحتوي على أيقونات الإشعارات والرسائل وقائمة المستخدم
- **البطاقات الإحصائية**: تعرض الإحصائيات الرئيسية
- **الرسوم البيانية**: تعرض بيانات المبيعات والطلبات بشكل مرئي

## التكنولوجيا المستخدمة

### 1. الواجهة الأمامية (Frontend)

- **إطار العمل**: Angular 17
- **لغات البرمجة**: TypeScript, HTML, CSS
- **مكتبات إضافية**:
  - Bootstrap 5 (تنسيق)
  - Chart.js (رسوم بيانية)
  - TinyMCE (محرر نصوص)
  - Simple DataTables (جداول البيانات)

### 2. الواجهة الخلفية (Backend)

- **إطار العمل**: ASP.NET Core 8
- **لغة البرمجة**: C#
- **قاعدة البيانات**: SQL Server
- **مكتبات إضافية**:
  - Entity Framework Core (ORM)
  - AutoMapper (تعيين الكائنات)
  - JWT (المصادقة)
  - Swagger (توثيق API)

## كيفية تشغيل المشروع

### 1. متطلبات النظام

- Node.js (v18 أو أحدث)
- .NET SDK 8.0
- SQL Server
- Visual Studio Code أو Visual Studio

### 2. تشغيل الواجهة الخلفية (Backend)

1. فتح مجلد `app-store-api` في Visual Studio أو Visual Studio Code
2. تكوين اتصال قاعدة البيانات في ملف `appsettings.json`
3. تنفيذ الأمر `dotnet restore` لتثبيت الحزم
4. تنفيذ الأمر `dotnet ef database update` لإنشاء قاعدة البيانات
5. تنفيذ الأمر `dotnet run` لتشغيل الخادم

### 3. تشغيل الواجهة الأمامية (Frontend)

1. فتح مجلد `app-store` في Visual Studio Code
2. تنفيذ الأمر `npm install` لتثبيت الحزم
3. تنفيذ الأمر `ng serve` لتشغيل خادم التطوير
4. فتح المتصفح على العنوان `http://localhost:4200`

## الأدوار والصلاحيات

### 1. المسؤول (Admin)

- الوصول الكامل إلى لوحة التحكم
- إدارة المنتجات والتصنيفات
- إدارة الطلبات والعملاء
- إدارة المستخدمين والأدوار
- تكوين إعدادات المتجر

### 2. المحرر (Editor)

- الوصول المحدود إلى لوحة التحكم
- إدارة المنتجات والتصنيفات
- عرض الطلبات والعملاء
- لا يمكنه إدارة المستخدمين أو الإعدادات

### 3. العميل (Customer)

- الوصول إلى واجهة المتجر
- تصفح المنتجات وإضافتها إلى السلة
- إتمام عمليات الشراء
- عرض وتتبع الطلبات الخاصة به
- إدارة معلومات الحساب الشخصي

## الميزات المستقبلية

1. **نظام المراجعات والتقييمات**: السماح للعملاء بتقييم المنتجات وكتابة المراجعات
2. **نظام الكوبونات والخصومات**: إضافة دعم للكوبونات والعروض الخاصة
3. **تكامل وسائل الدفع**: دمج بوابات دفع متعددة
4. **تتبع المخزون المتقدم**: إدارة المخزون بشكل أكثر تفصيلاً
5. **تحليلات متقدمة**: تقارير وإحصائيات أكثر تفصيلاً للمبيعات والعملاء
6. **دعم اللغات المتعددة**: إضافة دعم للغات متعددة
7. **تطبيق الهاتف المحمول**: تطوير تطبيق للهواتف الذكية

## الخلاصة

هذا المشروع يمثل متجراً إلكترونياً متكاملاً مع واجهة مستخدم حديثة وواجهة خلفية قوية. يوفر المشروع جميع الوظائف الأساسية للتجارة الإلكترونية، بما في ذلك عرض المنتجات، وإدارة السلة، وإتمام عمليات الشراء، وإدارة الطلبات، بالإضافة إلى لوحة تحكم شاملة للمسؤولين.

المشروع مصمم بطريقة قابلة للتوسع، مما يسمح بإضافة ميزات جديدة بسهولة في المستقبل. كما أنه يستخدم أحدث التقنيات والممارسات في تطوير الويب، مما يضمن أداءً جيداً وتجربة مستخدم ممتازة.
